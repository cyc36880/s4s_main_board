[TOC]



# 硬件寄存器技术文档

##  文档概述

本文档详细描述硬件系统中各功能模块的寄存器配置规范，包括寄存器访问规则、功能基地址分配及具体寄存器定义。适用于嵌入式软件开发、硬件调试及系统集成相关工作。



------

##  寄存器通用规范

### 访问规则

- **读写特性**：所有寄存器支持读写操作（应该避免向非设计为可写的寄存器写入数据，否则可能引发系统异常）。
- **地址构成**：实际物理地址 = **功能基地址** + **寄存器偏移地址**。
- **默认值**：未特殊说明的寄存器，上电初始值为 `0`。
- **安全约束**：
  - 禁止读写未定义的寄存器地址。
  - **严格遵循寄存器设计长度进行读写操作**：必须按照寄存器定义的字节长度进行**精确读写**（例如，若寄存器大小为3字节，则必须完整读写3字节，**禁止仅读写部分字节（如1字节或2字节）**，否则会导致数据截断、错误覆盖或系统异常）。

### 数据格式

- **多字节数据**：采用**大端序（高位在前，低位在后）**拼接。例如，16位数值 `0x1234`存储为：高字节 `0x12`在低地址，低字节 `0x34`在高地址。



------

## 功能模块基地址分配

| 功能模块        | 基地址（十六进制） | 十进制等效 |
| --------------- | ------------------ | ---------- |
| 充电管理        | `0x00`             | 0          |
| 氛围灯          | `0x05`             | 5          |
| RTC（实时时钟） | `0x0A`             | 10         |
| 舵机控制        | `0x0F`             | 15         |
| 陀螺仪          | `0x14`             | 20         |
| 语音模块        | `0x1E`             | 30         |
| 编码电机0       | `0x50`             | 80         |
| 编码电机1       | `0x5A`             | 90         |
| 编码电机2       | `0x64`             | 100        |
| 编码电机3       | `0x6E`             | 110        |

> 注：基地址按功能模块逻辑分组，相邻模块基地址间隔合理预留扩展空间。



------

## 功能模块寄存器详细定义

### 充电管理模块（基地址：`0x00`）

| 偏移地址 | 寄存器名称     | 功能描述                     | 数据长度（字节） | 取值范围/说明                 |
| -------- | -------------- | ---------------------------- | ---------------- | ----------------------------- |
| 0x00     | 充电状态标志位 | 当前是否处于充电状态         | 1                | `0`：未充电；`1`：正在充电    |
| 0x01     | 电池电量百分比 | 实时电量水平（无需单位转换） | 1                | `0~100`（整数，表示百分比值） |



------

### 氛围灯模块（基地址：`0x05`）

| 偏移地址 | 寄存器名称 | 功能描述                   | 数据长度（字节） | 取值范围/说明                                                |
| -------- | ---------- | -------------------------- | ---------------- | ------------------------------------------------------------ |
| 0x00     | 亮度控制   | 氛围灯整体亮度调节         | 1                | `0~255`（通常建议范围，具体取决于硬件限制）                  |
| 0x01     | RGB颜色值  | 三色混合值（红/绿/蓝通道） | 3                | **顺序**：`R(1字节) + G(1字节) + B(1字节)` 每个通道取值范围建议 `0~255` |

> 注：RGB值按 **大端序** 存储，即寄存器 `0x01`的低地址字节为R值，后续依次为G、B。



------

### RTC（实时时钟）模块（基地址：`0x0A`）

| 偏移地址 | 寄存器名称 | 功能描述              | 数据长度（字节） | 取值范围/说明                                                |
| -------- | ---------- | --------------------- | ---------------- | ------------------------------------------------------------ |
| 0x00     | 时间配置   | 当前时分秒设置        | 3                | **顺序**：`小时(1字节) + 分钟(1字节) + 秒(1字节)` 每个字段取值范围： - 小时：`0~23` - 分钟/秒：`0~59` |
| 0x01     | 日期配置   | 当前星期/月/日/年设置 | 4                | **顺序**：`星期(1字节) + 月份(1字节) + 日(1字节) + 年份(1字节)` 说明： - 星期：写入时建议固定为 `0`（系统根据年月日自动计算） - 月份：`1~12` - 日：`1~31`（需符合月份实际天数） - 年份：通常为 `0~99`（表示2000~2099年） |

> 注：日期寄存器 `0x01`的存储顺序为大端序，首字节为星期值（填 `0`即可，内部会自动计算），后续依次为月份、日、年份。



------

### 舵机控制模块（基地址：`0x0F`）

| 偏移地址 | 寄存器名称 | 功能描述                | 数据长度（字节） | 取值范围/说明                         |
| -------- | ---------- | ----------------------- | ---------------- | ------------------------------------- |
| 0x00     | 舵机0角度  | 控制第1个舵机的旋转角度 | 1                | `0~180`（整数，对应舵机物理角度范围） |
| 0x01     | 舵机1角度  | 控制第2个舵机的旋转角度 | 1                | `0~180`（整数，对应舵机物理角度范围） |

> 注：角度值以整数形式直接写入，硬件将根据输入值驱动舵机转动至对应角度（如 `90`表示中间位置）。



---

### 陀螺仪模块（基地址：`0x14`）

| 偏移地址 | 寄存器名称 | 功能描述                           | 数据长度（字节） | 取值范围/说明                                                |
| -------- | ---------- | ---------------------------------- | ---------------- | ------------------------------------------------------------ |
| 0x00     | 使能       | 使能运行陀螺仪                     | 1                | `0~1`（整数）<br />0：不使能<br />1：使能                    |
| 0x01     | 状态       | 控制陀螺仪校准、重置等             | 1                | `0~2`（整数）<br />0：空闲<br />1：开始校准 / 正在校准<br />2：重置偏航角角度 |
| 0x02     | 加速度     | 三个方向的加速度，按照补码方式存储 | 6                | **顺序**：`x轴(2字节) + y轴(2字节) + z轴(2字节)`             |
| 0x03     | 角速度     | 三个方向的角速度，按照补码方式存储 | 6                | **顺序**：`x轴(2字节) + y轴(2字节) + z轴(2字节)`             |
| 0x04     | 角度       | 三个方向的角度，按照补码方式存储   | 6                | **顺序**：`x轴(2字节) + y轴(2字节) + z轴(2字节)`             |

> 注：校准期间，请静置设备，避免出现晃动。校准需要 3S 左右，校准处于阻塞阶段，这期间的I2C命令无法立即执行，会在校准后再执行命令。

> 角度按照 `Madgwick（无磁） 的四元数` 拟合算法得出，由于没有磁场传感器，偏航角存在温漂
>
> `加速度`：三个轴的重力加速度，单位（m/s^2)。实际读出的值为放大100倍后的值（如：9.8，实际读出为980）
>
> `角速度`：围绕三个轴的角速度，单位（dps/s （度/秒）)。实际读出的值为放大100倍后的值（如：9.8，实际读出为980）
>
> `角度`：三个轴的旋转角度，单位（°，角度)。实际读出的值为放大100倍后的值（如：9.8，实际读出为980）



---

### 语音模块（基地址：`0x1E`）

| 偏移地址 | 寄存器名称 | 功能描述 | 数据长度（字节） | 取值范围/说明 |
| -------- | ---------- | -------- | ---------------- | ------------- |
| 0x00     |            |          |                  |               |



------

### 编码电机模块

> 注：对编码器的值进行写0，除了编码会被写0外， `位置PID` 与 `速度PID` 的积分会自动归0。

#### 编码电机0 （基地址：`0x50`）

| 偏移地址 | 寄存器名称 | 功能描述                      | 数据长度（字节） | 取值范围/说明                                                |
| -------- | ---------- | ----------------------------- | ---------------- | ------------------------------------------------------------ |
| 0x00     | 模式配置   | 设置电机的工作模式            | 1                | `0~2`<br />0：直流电机<br />1：位置控制<br />2：速度控制     |
| 0x01     | 功率/速度  | 设置电机的功率或速度2         |                  | `-1000~1000`（整数）                                         |
| 0x02     | 目标位置   | 设置电机需要转到的位置        | 4                | `-2147483648~2147483647`(整数)                               |
| 0x03     | 编码器值   | 电机的编码器数值              | 4                | `-2147483648~2147483647`(整数)                               |
| 0x04     | 位置PID    | 电机工作在位置控制时的位置PID | 3                | **顺序**：`P(1字节) + I(1字节) + D(1字节)` 每个通道取值范围建议 `-128~127` |
| 0x05     | 速度PID    | 电机工作在速度控制时的速度PID | 3                | **顺序**：`P(1字节) + I(1字节) + D(1字节)` 每个通道取值范围建议 `-128~127` |



---

#### 编码电机0 （基地址：`0x5A`）

| 偏移地址 | 寄存器名称 | 功能描述                      | 数据长度（字节） | 取值范围/说明                                                |
| -------- | ---------- | ----------------------------- | ---------------- | ------------------------------------------------------------ |
| 0x00     | 模式配置   | 设置电机的工作模式            | 1                | `0~2`<br />0：直流电机<br />1：位置控制<br />2：速度控制     |
| 0x01     | 功率/速度  | 设置电机的功率或速度2         |                  | `-1000~1000`（整数）                                         |
| 0x02     | 目标位置   | 设置电机需要转到的位置        | 4                | `-2147483648~2147483647`(整数)                               |
| 0x03     | 编码器值   | 电机的编码器数值              | 4                | `-2147483648~2147483647`(整数)                               |
| 0x04     | 位置PID    | 电机工作在位置控制时的位置PID | 3                | **顺序**：`P(1字节) + I(1字节) + D(1字节)` 每个通道取值范围建议 `-128~127` |
| 0x05     | 速度PID    | 电机工作在速度控制时的速度PID | 3                | **顺序**：`P(1字节) + I(1字节) + D(1字节)` 每个通道取值范围建议 `-128~127` |



---

#### 编码电机0 （基地址：`0x64`）

| 偏移地址 | 寄存器名称 | 功能描述                      | 数据长度（字节） | 取值范围/说明                                                |
| -------- | ---------- | ----------------------------- | ---------------- | ------------------------------------------------------------ |
| 0x00     | 模式配置   | 设置电机的工作模式            | 1                | `0~2`<br />0：直流电机<br />1：位置控制<br />2：速度控制     |
| 0x01     | 功率/速度  | 设置电机的功率或速度2         |                  | `-1000~1000`（整数）                                         |
| 0x02     | 目标位置   | 设置电机需要转到的位置        | 4                | `-2147483648~2147483647`(整数)                               |
| 0x03     | 编码器值   | 电机的编码器数值              | 4                | `-2147483648~2147483647`(整数)                               |
| 0x04     | 位置PID    | 电机工作在位置控制时的位置PID | 3                | **顺序**：`P(1字节) + I(1字节) + D(1字节)` 每个通道取值范围建议 `-128~127` |
| 0x05     | 速度PID    | 电机工作在速度控制时的速度PID | 3                | **顺序**：`P(1字节) + I(1字节) + D(1字节)` 每个通道取值范围建议 `-128~127` |



---

#### 编码电机0 （基地址：`0x6E`）

| 偏移地址 | 寄存器名称 | 功能描述                      | 数据长度（字节） | 取值范围/说明                                                |
| -------- | ---------- | ----------------------------- | ---------------- | ------------------------------------------------------------ |
| 0x00     | 模式配置   | 设置电机的工作模式            | 1                | `0~2`<br />0：直流电机<br />1：位置控制<br />2：速度控制     |
| 0x01     | 功率/速度  | 设置电机的功率或速度2         |                  | `-1000~1000`（整数）                                         |
| 0x02     | 目标位置   | 设置电机需要转到的位置        | 4                | `-2147483648~2147483647`(整数)                               |
| 0x03     | 编码器值   | 电机的编码器数值              | 4                | `-2147483648~2147483647`(整数)                               |
| 0x04     | 位置PID    | 电机工作在位置控制时的位置PID | 3                | **顺序**：`P(1字节) + I(1字节) + D(1字节)` 每个通道取值范围建议 `-128~127` |
| 0x05     | 速度PID    | 电机工作在速度控制时的速度PID | 3                | **顺序**：`P(1字节) + I(1字节) + D(1字节)` 每个通道取值范围建议 `-128~127` |



------

## 5. 注意事项

1. **地址对齐**：确保计算的实际物理地址不超过硬件寻址范围。
2. **数据校验**：写入多字节数据时，需严格遵循大端序规则拼接字节。
3. **功能测试**：首次操作新模块前，建议通过单寄存器读写验证基础功能正常。
4. **异常处理**：若设备无响应，优先检查寄存器地址是否正确、数据长度是否符合定义。





------

*文档使用说明：开发人员可直接根据表格定位功能模块寄存器地址及参数范围。*